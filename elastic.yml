---
version: '3'
includes:
  eck: eck.yml
  elk:
    taskfile: kubectl.yml
    vars:
      n: elk
      labels: 'istio.io/dataplane-mode=ambient'
      f: elk.yml
tasks:
  default:
    deps:
      - upgrade
  upgrade:
    deps:
      - task: eck:upgrade
    cmds:
      - task: elk:ns-create
      - task: elk:ns-label
      - task: elk:apply
  delete:
    cmds:
      - task: elk:delete
      - task: elk:ns-delete
      - task: eck:delete
  check:
    deps:
      - task: eck:check
