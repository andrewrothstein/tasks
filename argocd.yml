---
version: '3'
includes:
  argo-release:
    taskfile: argo-release.yml
    internal: true
    vars:
      chart: argo-cd
      chart_ver: 7.4.1
      name: argo-cd
      namespace: argocd
      helm_args: -f argocd-values.yml
tasks:
  default:
    deps:
      - upgrade
  initial-password:
    vars:
      n: '{{ .n }}'
    cmds:
      - |-
        argocd admin initial-password \
          -n {{ .n | default "argocd" | quote }}
  upgrade:
    cmds:
      - task: argo-release:upgrade
  delete:
    cmds:
      - task: argo-release:delete
  check:
    deps:
      - task: argo-release:check
