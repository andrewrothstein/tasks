---
version: '3'
tasks:
  list:
    vars:
      TERRAFORM_EXE: '{{ .TERRAFORM_EXE | default "terraform" }}'
    cmds:
      - '{{ .TERRAFORM_EXE | quote }} workspace list'
  select:
    vars:
      TERRAFORM_EXE: '{{ .TERRAFORM_EXE | default "terraform" }}'
      WORKSPACE_NAME: '{{ .WORKSPACE_NAME | default "default" }}'
    cmds:
      - '{{ .TERRAFORM_EXE | quote }} workspace select {{ .WORKSPACE_NAME | quote }}'
    status:
      - '{{ .TERRAFORM_EXE | quote }} workspace list | grep "* {{ .WORKSPACE_NAME }}"'
  new:
    vars:
      TERRAFORM_EXE: '{{ .TERRAFORM_EXE | default "terraform" }}'
      WORKSPACE_NAME: '{{ .WORKSPACE_NAME | default "default" }}'
    cmds:
      - '{{ .TERRAFORM_EXE | quote }} workspace new {{ .WORKSPACE_NAME | quote }}'
    status:
      - '{{ .TERRAFORM_EXE | quote }} workspace list | grep {{ .WORKSPACE_NAME | quote }}'
  delete:
    vars:
      TERRAFORM_EXE: '{{ .TERRAFORM_EXE | default "terraform" }}'
      WORKSPACE_NAME: '{{ .WORKSPACE_NAME | default "default" }}'
    cmds:
      - '{{ .TERRAFORM_EXE | quote }} workspace delete {{ .WORKSPACE_NAME | quote }}'
