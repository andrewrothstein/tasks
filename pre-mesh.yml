---
version: '3'
includes:
  cert-manager: cert-manager.yml
#  cert-manager: pet.yml

  elastic: elastic.yml
#  elastic: pet.yml

  kube-prometheus-stack: kube-prometheus-stack.yml
#  kube-prometheus-stack: pet.yml

  keda: keda.yml
#  keda: pet.yml

  dns: coredns.yml
#  dns: pet.yml

#  csi-driver-nfs: csi-driver-nfs.yml
  csi-driver-nfs: pet.yml

#  flux: flux.yml
  flux: pet.yml

#  argoproj: argoproj.yml
  argoproj: pet.yml

  metallb: metallb.yml
#  metallb: pet.yml

#  ingress: nginx-ingress.yml
  ingress: pet.yml

#  rook: rook.yml
  rook: pet.yml

#  minio: minio.yml
  minio: pet.yml

#  tekton-pipelines: tekton-pipelines.yml
  tekton-pipelines: pet.yml

#  tekton-triggers: tekton-triggers.yml
  tekton-triggers: pet.yml

#  dragonfly: dragonfly.yml
  dragonfly: pet.yml

#  knative: knative.yml
  knative: pet.yml

#  cluster_api: cluster_api.yml
  cluster_api: pet.yml

#  kubevirt: kubevirt.yml
  kubevirt: pet.yml

#  kubevirt-cdi: kubevirt-cdi.yml
  kubevirt-cdi: pet.yml

#  kubevirt-vms: kubevirt-vm.yml
  kubevirt-vms: pet.yml

#  postgresql: bitnami-postgresql.yml
  postgresql: pet.yml

#  coderv2: coderv2.yml
  coderv2: pet.yml

#  crossplane: crossplane.yml
  crossplane: pet.yml

#  k8ssandra: k8ssandra.yml
  k8ssandra: pet.yml

#  velero: velero.yml
  velero: pet.yml

#  trident: trident.yml
  trident: pet.yml
tasks:
  default:
    deps:
      - up
  up:
    cmds:
      - task: cert-manager:install
      - task: elastic:install
      - task: kube-prometheus-stack:install
      - task: keda:install
      - task: dns:install
      - task: ingress:install
      - task: flux:install
      - task: argoproj:install
      - task: csi-driver-nfs:install
      - task: trident:install
      - task: metallb:install
      - task: rook:install
      - task: minio:install
      - task: tekton-pipelines:apply
      - task: tekton-triggers:apply
      - task: dragonfly:install
      - task: knative:install
      - task: cluster_api:apply
      - task: kubevirt:apply
      - task: kubevirt-cdi:apply
      - task: kubevirt-vms:apply
      - task: postgresql:install
      - task: coderv2:install
      - task: crossplane:install
      - task: k8ssandra:install
      - task: velero:install
  delete:
    cmds:
      - task: velero:delete
      - task: k8ssandra:delete
      - task: crossplane:delete
      - task: coderv2:delete
      - task: postgresql:delete
      - task: kubevirt-vms:delete
      - task: kubevirt-cdi:delete
      - task: kubevirt:delete
      - task: cluster_api:delete
      - task: knative:delete
      - task: dragonfly:delete
      - task: tekton-triggers:delete
      - task: tekton-pipelines:delete
      - task: minio:delete
      - task: rook:delete
      - task: metallb:install
      - task: trident:delete
      - task: csi-driver-nfs:delete
      - task: argoproj:delete
      - task: flux:delete
      - task: ingress:delete
      - task: dns:delete
      - task: keda:delete
      - task: kube-prometheus-stack:delete
      - task: elastic:delete
      - task: cert-manager:delete
