---
version: '3'
tasks:
  install:
    vars:
      workdir: '{{ .workdir | default .USER_WORKING_DIR }}'
      install_args: '{{ .install_args }}'
    cmds:
      - |
        {{- if .workdir }}
        cd {{ .workdir | quote }}
        {{- end }}

        {{- if .install_args }}
        pipenv \
          install \
          {{ .install_args }};
        {{- end }}
  run:
    vars:
      workdir: '{{ .workdir | default .USER_WORKING_DIR }}'
      run_args: '{{ .run_args }}'
    cmds:
      - |
        {{- if .workdir }}
        cd {{ .workdir }}
        {{- end }}
        {{- if .run_args }}
        pipenv run {{ .run_args }};
        {{- end }}
